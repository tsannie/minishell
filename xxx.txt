# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    xxx.txt                                            :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: phbarrad <phbarrad@student.42.fr>          +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2021/02/10 13:13:39 by phbarrad          #+#    #+#              #
#    Updated: 2021/02/10 15:14:40 by phbarrad         ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

#include "../includes/minish.h"
  /*      
int ft_strlenvir(char const *str)
{
    int i = 0;

    while (str[i] != '\0' && str[i] != ';')
        i++;
    return (i);
}
	
char *cutvir(char *str)
{
    int e = 0;
    char *nstr = malloc(sizeof(char) * (ft_strlenvir(str) + 1));

    while (str[e] != '\0' && str[e] != ';')
    {
        nstr[e] = str[e];
        e++;
    }
    if (e > 0)
    {
        if (str[e - 1] == ' ')
            nstr[e - 1] = '\0';
        else
            nstr[e] = '\0';
    }
    return (nstr);
}

char *find_str(char *str)
{
    int i = 0, j = 0;

    while (str[j] != 'd')
        j++;
    j++;
    while (str[j] == ' ' || str[j] == '\t')
        j++;
    while (str[i] != '.' && str[i] != ';') {
        i++;
        if (str[i] == '\0' || str[i] == ';')
            return (cutvir(str+j));
    }
    return (cutvir(str + i));
}
*/

int get_val_len(t_set *set)
{
	int i;
	int e;
    char *cwd;
	char buff[4096 + 1];

	i = 0;
	e = 0;
    cwd = getcwd(buff, 4097);
	set->cwplen = ft_strlen(cwd);
    while (cwd[i])
    {
        if (cwd[i] == '/')
            e++;
        i++;
    }
	return (e);
}

char *ft_getenv(t_set *set)
{
	char *result;
	int e;
	int r = -3;

	e = get_val_len(set);
	result = malloc(sizeof(char) * (set->cwplen + 1));
    while (e > 0)
    {
        r += 3;
        result[r] = '.';
        result[r+1] = '.';
        result[r+2] = '/';
        e--;
    }
    result[r+3] = '\0';
    return (result);
}
